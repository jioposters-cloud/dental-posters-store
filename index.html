---
layout: default
title: Status Ring - Dental Posters & 3D Prints Store
---

<div class="hero">
  <h1>Welcome to Status Ring Store</h1>
  <p>Quality dental posters, patient education materials, books, and 3D printed items</p>
</div>

<div class="toolbar">
  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="Search products..." class="search-input">
    <button class="search-btn">Search</button>
  </div>
  
  <div class="filter-section">
    <label>Sort by:</label>
    <select id="sortSelect" class="sort-select">
      <option value="featured">Featured</option>
      <option value="price-low">Price: Low to High</option>
      <option value="price-high">Price: High to Low</option>
      <option value="newest">Newest</option>
    </select>
  </div>
</div>

<div class="category-filter">
  <h2>Shop by Category</h2>
  <div class="categories" id="categoriesContainer">
    <button class="category-btn active" data-category="all">All Products</button>
  </div>
</div>

<div id="products-container" class="products-grid"></div>

<div class="pagination">
  <button id="prev-btn" class="pagination-btn">Previous</button>
  <span id="page-info">Page 1 of 1</span>
  <button id="next-btn" class="pagination-btn">Next</button>
</div>

<script>
const ITEMS_PER_PAGE = 12;
let allProducts = [];
let filteredProducts = [];
let currentPage = 1;
let currentCategory = 'all';
let currentSort = 'featured';
let searchQuery = '';

// Data source - using Jekyll's _data folder
const DATA_URL = '/dental-posters-store/_data/products.csv';

// Parse CSV from Jekyll data
async function loadProducts() {
  try {
    // For Jekyll, we can access site.data.products directly
    // Since this is a client-side app, we'll parse the CSV file
    const response = await fetch('https://raw.githubusercontent.com/jioposters-cloud/dental-posters-store/main/_data/products.csv');
    const csv = await response.text();
    allProducts = parseCSV(csv);
    
    // Extract unique categories
    const categories = [...new Set(allProducts.map(p => p.category))];
    populateCategories(['all', ...categories]);
    
    // Initial load
    applyFiltersAndSort();
    renderProducts();
  } catch (error) {
    console.error('Error loading products:', error);
    document.getElementById('products-container').innerHTML = '<div class="error-msg">Error loading products. Please refresh the page.</div>';
  }
}

function parseCSV(csv) {
  const lines = csv.trim().split('\n');
  const headers = lines[0].split(',').map(h => h.trim().toLowerCase());
  const products = [];
  
  for (let i = 1; i < lines.length; i++) {
    if (!lines[i].trim()) continue;
    
    const values = lines[i].split(',').map(v => v.trim());
    const product = {};
    
    headers.forEach((header, index) => {
      product[header] = values[index] || '';
    });
    
    products.push(product);
  }
  
  return products;
}

function populateCategories(categories) {
  const container = document.getElementById('categoriesContainer');
  container.innerHTML = '';
  
  categories.forEach(cat => {
    const btn = document.createElement('button');
    btn.className = 'category-btn' + (cat === 'all' ? ' active' : '');
    btn.textContent = cat.charAt(0).toUpperCase() + cat.slice(1);
    btn.dataset.category = cat;
    
    btn.addEventListener('click', () => {
      document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      currentCategory = cat;
      currentPage = 1;
      applyFiltersAndSort();
      renderProducts();
    });
    
    container.appendChild(btn);
  });
}

function applyFiltersAndSort() {
  // Filter by category
  let filtered = currentCategory === 'all' 
    ? allProducts 
    : allProducts.filter(p => p.category === currentCategory);
  
  // Filter by search
  if (searchQuery) {
    filtered = filtered.filter(p => 
      p.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
      p.description.toLowerCase().includes(searchQuery.toLowerCase())
    );
  }
  
  // Sort
  switch(currentSort) {
    case 'price-low':
      filtered.sort((a, b) => parseInt(a.price) - parseInt(b.price));
      break;
    case 'price-high':
      filtered.sort((a, b) => parseInt(b.price) - parseInt(a.price));
      break;
    case 'newest':
      filtered.sort((a, b) => parseInt(b.id) - parseInt(a.id));
      break;
  }
  
  filteredProducts = filtered;
}

function renderProducts() {
  const start = (currentPage - 1) * ITEMS_PER_PAGE;
  const end = start + ITEMS_PER_PAGE;
  const pageProducts = filteredProducts.slice(start, end);
  
  const container = document.getElementById('products-container');
  
  if (pageProducts.length === 0) {
    container.innerHTML = '<div class="no-products">No products found. Try adjusting your filters.</div>';
    updatePagination();
    return;
  }
  
  container.innerHTML = pageProducts.map(product => createProductCard(product)).join('');
  updatePagination();
  
  // Refresh Snipcart
  if (window.Snipcart) {
    window.Snipcart.api.cart.items.refresh();
  }
}

function createProductCard(product) {
  const image = product.main_image || 'https://via.placeholder.com/300?text=No+Image';
  const description = (product.description || '').substring(0, 100);
  
  return `
    <div class="product-card">
      <div class="product-image-wrapper">
        <img src="${image}" alt="${product.name}" class="product-image" onerror="this.src='https://via.placeholder.com/300?text=No+Image'">
        <span class="product-category-badge">${product.category}</span>
      </div>
      <div class="product-info">
        <h3 class="product-name">${product.name}</h3>
        <p class="product-category">Category: ${product.category}</p>
        <p class="product-description">${description}...</p>
        <div class="product-footer">
          <span class="product-price"><strong>â‚¹${product.price}</strong></span>
          <button class="snipcart-add-item add-to-cart-btn"
            data-item-id="product-${product.id}"
            data-item-name="${product.name}"
            data-item-price="${product.price}"
            data-item-image="${image}"
            data-item-url="https://jioposters-cloud.github.io/dental-posters-store/">Add to Cart</button>
        </div>
      </div>
    </div>
  `;
}

function updatePagination() {
  const totalPages = Math.ceil(filteredProducts.length / ITEMS_PER_PAGE);
  document.getElementById('page-info').textContent = `Page ${currentPage} of ${totalPages}`;
  document.getElementById('prev-btn').disabled = currentPage === 1;
  document.getElementById('next-btn').disabled = currentPage === totalPages;
}

// Event Listeners
document.getElementById('searchInput').addEventListener('keyup', (e) => {
  searchQuery = e.target.value;
  currentPage = 1;
  applyFiltersAndSort();
  renderProducts();
});

document.getElementById('sortSelect').addEventListener('change', (e) => {
  currentSort = e.target.value;
  currentPage = 1;
  applyFiltersAndSort();
  renderProducts();
});

document.getElementById('prev-btn').addEventListener('click', () => {
  if (currentPage > 1) {
    currentPage--;
    renderProducts();
    window.scrollTo(0, 0);
  }
});

document.getElementById('next-btn').addEventListener('click', () => {
  const totalPages = Math.ceil(filteredProducts.length / ITEMS_PER_PAGE);
  if (currentPage < totalPages) {
    currentPage++;
    renderProducts();
    window.scrollTo(0, 0);
  }
});

// Load products on page load
window.addEventListener('load', loadProducts);
</script>
